name: "Reflective Contribution Snake ğŸ"

on:
  # The serpent of days redraws itself every midnight
  schedule:
    - cron: "0 0 * * *"
  # Allow manual re-summoning from the Actions tab
  workflow_dispatch:
  # And whenever the main timeline is rewritten
  push:
    branches:
      - main  # change to "master" if your default branch is master

# The serpent must be allowed to write its path into the scrolls
permissions:
  contents: write

jobs:
  reflect-and-generate:
    runs-on: ubuntu-latest

    steps:
      - name: "ğŸ“œ Retrieve the scroll of commits"
        uses: actions/checkout@v4

      - name: "ğŸ Weave the Serpent of Time"
        uses: Platane/snk@v3
        with:
          github_user_name: jadugar2003
          # two versions: light and dark â€“ two sides of reflection
          outputs: |
            dist/philosophical-snake-light.svg?palette=github-light
            dist/philosophical-snake-dark.svg?palette=github-dark

      - name: "ğŸ•¯ï¸ Carve the path back into the repository"
        uses: crazy-max/ghaction-github-pages@v4
        with:
          target_branch: output          # branch where the snake svgs will live
          build_dir: dist
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
